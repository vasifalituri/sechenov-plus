# üìä Storage Migration Report

**Date:** 20 —è–Ω–≤–∞—Ä—è 2026  
**Status:** ‚úÖ –ß–∞—Å—Ç–∏—á–Ω–æ —É—Å–ø–µ—à–Ω–æ

---

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase Storage
- ‚úÖ –°–æ–∑–¥–∞–Ω bucket `profiles` (public)
- ‚úÖ Bucket `materials` —É–∂–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª
- ‚úÖ Credentials –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ `.env.local`

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω enum `StorageType` (SUPABASE, EXTERNAL_MEGA, LOCAL)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–ª–æ–Ω–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü—É `materials`:
  - `storageType`
  - `storageBucket`
  - `externalUrl`
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ `LOCAL`

### 3. –ú–∏–≥—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤

#### –ü—Ä–æ—Ñ–∏–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
- ‚úÖ **1/1** —É—Å–ø–µ—à–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ Supabase
- URL: `https://dwfdkrksrcjzhdasjwee.supabase.co/storage/v1/object/public/profiles/...`

#### –ú–∞—Ç–µ—Ä–∏–∞–ª—ã:
- ‚úÖ **4/6** —É—Å–ø–µ—à–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ Supabase
- ‚ùå **2/6** –Ω–µ —É–¥–∞–ª–æ—Å—å –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å (—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –≤ –∏–º–µ–Ω–∏)

---

## üìÅ –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç

### ‚úÖ –£—Å–ø–µ—à–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:

1. **Vasif Ali .CV (1).pdf** - 0.38 MB
   - –°—Ç–∞—Ç—É—Å: ‚úÖ –í Supabase
   - –¢–∏–ø: SUPABASE

2. **LOR Vasif Ali.docx** - 0.01 MB
   - –°—Ç–∞—Ç—É—Å: ‚úÖ –í Supabase
   - –¢–∏–ø: SUPABASE

3. **photo.pdf** - 0.20 MB
   - –°—Ç–∞—Ç—É—Å: ‚úÖ –í Supabase
   - –¢–∏–ø: SUPABASE

4. **files.aspx_compressed.pdf** - 19.35 MB
   - –°—Ç–∞—Ç—É—Å: ‚úÖ –í Supabase
   - –¢–∏–ø: SUPABASE

### ‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å:

1. **357 - Cell-Biology Physiology] DNA Transcription001.pdf** - 3.74 MB (–¥—É–±–ª–∏–∫–∞—Ç 1)
   - –°—Ç–∞—Ç—É—Å: ‚è≥ LOCAL
   - –ü—Ä–∏—á–∏–Ω–∞: –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –≤ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞ `]`
   - –†–µ—à–µ–Ω–∏–µ: –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∑–∞–Ω–æ–≤–æ

2. **357 - Cell-Biology Physiology] DNA Transcription001.pdf** - 3.74 MB (–¥—É–±–ª–∏–∫–∞—Ç 2)
   - –°—Ç–∞—Ç—É—Å: ‚è≥ LOCAL
   - –ü—Ä–∏—á–∏–Ω–∞: –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –≤ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞ `]`
   - –†–µ—à–µ–Ω–∏–µ: –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∑–∞–Ω–æ–≤–æ

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:

#### 1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (5 –º–∏–Ω—É—Ç)
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å dev —Å–µ—Ä–≤–µ—Ä
npm run dev
```

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—å–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å)
- ‚úÖ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (4 —Ñ–∞–π–ª–∞)
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ (<100MB)

#### 2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å 2 –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ñ–∞–π–ª–∞

**–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**
1. –ó–∞–π—Ç–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
2. –£–¥–∞–ª–∏—Ç—å 2 –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–∞
3. –ü–æ–ø—Ä–æ—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –∑–∞–Ω–æ–≤–æ —Å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º

**–í–∞—Ä–∏–∞–Ω—Ç B: –í—Ä—É—á–Ω—É—é –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å**
1. –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –≤ `public/uploads/`:
   - –£–±—Ä–∞—Ç—å `]` –∏–∑ –∏–º–µ–Ω–∏
   - –ù–∞–ø—Ä–∏–º–µ—Ä: `357-Cell-Biology-Physiology-DNA-Transcription001.pdf`
2. –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é —Å–Ω–æ–≤–∞

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –¢–µ—Å—Ç 1: –ü—Ä–æ—Ñ–∏–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ‚úÖ
```
1. –ó–∞–π—Ç–∏ –Ω–∞ /profile
2. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤–æ–µ —Ñ–æ—Ç–æ
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
```

### –¢–µ—Å—Ç 2: –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ ‚úÖ
```
1. –ó–∞–π—Ç–∏ –Ω–∞ /materials
2. –ù–∞–π—Ç–∏ –æ–¥–∏–Ω –∏–∑ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
3. –ù–∞–∂–∞—Ç—å "Download"
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ñ–∞–π–ª —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è
```

### –¢–µ—Å—Ç 3: –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ ‚úÖ
```
1. –ó–∞–π—Ç–∏ –Ω–∞ /materials/upload
2. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π PDF (<100MB)
3. –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: "Supabase Storage (–±—ã—Å—Ç—Ä–æ)"
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ñ–∞–π–ª –∑–∞–≥—Ä—É–∑–∏–ª—Å—è
```

### –¢–µ—Å—Ç 4: –ó–∞–≥—Ä—É–∑–∫–∞ –±–æ–ª—å—à–æ–≥–æ —Ñ–∞–π–ª–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
```
1. –ó–∞–π—Ç–∏ –Ω–∞ /materials/upload
2. –ó–∞–≥—Ä—É–∑–∏—Ç—å PDF >100MB
3. –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: "MEGA (–≤–Ω–µ—à–Ω–µ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)"
4. –ü–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å MEGA credentials
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (.env.local):
```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://dwfdkrksrcjzhdasjwee.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=***
SUPABASE_SERVICE_ROLE_KEY=***

# Storage
SUPABASE_STORAGE_BUCKET=materials
SUPABASE_PROFILES_BUCKET=profiles
MAX_FILE_SIZE=524288000           # 500MB
MAX_SUPABASE_FILE_SIZE=104857600  # 100MB

# MEGA (–ø–æ–∫–∞ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
MEGA_EMAIL=
MEGA_PASSWORD=
MEGA_FOLDER_NAME=sechenov-plus-materials
```

---

## üìù –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å

### –ö—Ä–∏—Ç–∏—á–Ω–æ (—Å–µ–≥–æ–¥–Ω—è):
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É/—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å 2 –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ñ–∞–π–ª–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–∫–æ–≥–¥–∞ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è):
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å MEGA –¥–ª—è —Ñ–∞–π–ª–æ–≤ >100MB
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å RLS policies –≤ Supabase (–¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
- [ ] –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –∏–∑ `public/uploads/` (–ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏)

---

## üí∞ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

### Supabase Storage:
- **Profile images:** ~100 KB (1 —Ñ–∞–π–ª)
- **Materials:** ~20 MB (4 —Ñ–∞–π–ª–∞)
- **–ò—Ç–æ–≥–æ:** ~20 MB / 1 GB (2% –æ—Ç free tier)

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (—Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã):
- **Materials:** ~8 MB (2 —Ñ–∞–π–ª–∞ + –æ—Ä–∏–≥–∏–Ω–∞–ª—ã –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö)
- –ú–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

---

## üéâ –ò—Ç–æ–≥

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
‚úÖ Supabase Storage –Ω–∞—Å—Ç—Ä–æ–µ–Ω  
‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∞  
‚úÖ 4 –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã  
‚úÖ 1 –ø—Ä–æ—Ñ–∏–ª—å–Ω–æ–µ —Ñ–æ—Ç–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ  
‚úÖ –ù–æ–≤—ã–µ –∑–∞–≥—Ä—É–∑–∫–∏ –±—É–¥—É—Ç –∏–¥—Ç–∏ –≤ Supabase  
‚úÖ –£–º–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä—É —Ñ–∞–π–ª–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç  

### –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–¥–µ–ª–∞—Ç—å:
‚è≥ –ò—Å–ø—Ä–∞–≤–∏—Ç—å 2 —Ñ–∞–π–ª–∞ —Å –ø—Ä–æ–±–ª–µ–º–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏  
‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å  
‚è≥ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å MEGA (–∫–æ–≥–¥–∞ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è —Ñ–∞–π–ª—ã >100MB)  

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å–º.:
- **STORAGE_SETUP.md** - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ)
- **STORAGE_MIGRATION.md** - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- **TESTING_STORAGE.md** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **NEXT_STEPS.md** - –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

---

**–û–±—â–∏–π —Å—Ç–∞—Ç—É—Å:** ‚úÖ **80% –∑–∞–≤–µ—Ä—à–µ–Ω–æ, –≥–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!**
